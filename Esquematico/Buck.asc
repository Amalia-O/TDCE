Version 4.1
SHEET 1 5460 2260
WIRE 64 -240 -80 -240
WIRE 160 -240 64 -240
WIRE 1888 -240 1760 -240
WIRE 672 -208 624 -208
WIRE 768 -208 672 -208
WIRE 928 -208 832 -208
WIRE 976 -208 928 -208
WIRE 1888 -208 1888 -240
WIRE -80 -192 -80 -240
WIRE 64 -176 64 -240
WIRE 976 -176 976 -208
WIRE 672 -96 672 -208
WIRE 736 -96 672 -96
WIRE 928 -96 928 -208
WIRE 928 -96 880 -96
WIRE 1888 -96 1888 -128
WIRE -80 -64 -80 -112
WIRE 64 -64 64 -112
WIRE 736 -64 624 -64
WIRE 1232 -64 880 -64
WIRE 672 -32 672 -96
WIRE 736 -32 672 -32
WIRE 976 -32 976 -112
WIRE 976 -32 880 -32
WIRE 1232 -32 976 -32
WIRE 736 0 672 0
WIRE 1232 0 880 0
WIRE 672 64 672 0
WIRE 144 272 144 240
WIRE 192 272 144 272
WIRE 144 288 144 272
WIRE 192 304 192 272
WIRE -80 336 -160 336
WIRE 32 336 0 336
WIRE 32 368 32 336
WIRE 96 368 32 368
WIRE 144 400 144 384
WIRE 192 400 192 368
WIRE 192 400 144 400
WIRE 1648 448 1568 448
WIRE 144 480 144 400
WIRE 144 480 -160 480
WIRE 256 480 144 480
WIRE 400 480 336 480
WIRE 544 480 480 480
WIRE 768 480 544 480
WIRE 992 480 768 480
WIRE 1184 480 992 480
WIRE 1648 480 1648 448
WIRE 544 528 544 480
WIRE 768 528 768 480
WIRE 992 528 992 480
WIRE 144 560 144 480
WIRE 192 560 144 560
WIRE 144 576 144 560
WIRE 192 592 192 560
WIRE -80 624 -160 624
WIRE 32 624 0 624
WIRE 544 624 544 608
WIRE 768 624 768 608
WIRE 992 624 992 608
WIRE 32 656 32 624
WIRE 96 656 32 656
WIRE 1648 672 1648 560
WIRE 144 688 144 672
WIRE 192 688 192 656
WIRE 192 688 144 688
WIRE 544 704 544 688
WIRE 768 704 768 688
WIRE 992 704 992 688
WIRE 144 720 144 688
WIRE 96 992 -48 992
WIRE 944 1008 944 944
WIRE 1056 1008 944 1008
WIRE -48 1024 -48 992
WIRE 1056 1040 1056 1008
WIRE 1504 1072 1392 1072
WIRE 1600 1072 1568 1072
WIRE 944 1120 944 1008
WIRE -48 1136 -48 1104
WIRE 912 1136 656 1136
WIRE 1472 1136 1472 944
WIRE 1056 1152 1056 1120
WIRE 1056 1152 976 1152
WIRE 1168 1152 1056 1152
WIRE 1264 1152 1168 1152
WIRE 1392 1152 1392 1072
WIRE 1392 1152 1344 1152
WIRE 1440 1152 1392 1152
WIRE 912 1168 816 1168
WIRE 1600 1168 1600 1072
WIRE 1600 1168 1504 1168
WIRE 1696 1168 1600 1168
WIRE 1728 1168 1696 1168
WIRE 1440 1184 1392 1184
WIRE 944 1216 944 1184
WIRE 1472 1232 1472 1200
WIRE 816 1280 816 1168
WIRE 896 1280 816 1280
WIRE 1056 1280 1056 1152
WIRE 1056 1280 976 1280
WIRE 304 1312 240 1312
WIRE 560 1312 304 1312
WIRE 1808 1312 1808 944
WIRE 1920 1312 1808 1312
WIRE 304 1360 304 1312
WIRE 1920 1360 1920 1312
WIRE 816 1376 816 1280
WIRE 944 1376 816 1376
WIRE 1600 1376 1600 1168
WIRE 1600 1376 1024 1376
WIRE 656 1392 656 1136
WIRE 656 1392 480 1392
WIRE 1808 1456 1808 1312
WIRE 560 1472 560 1312
WIRE 1728 1472 1728 1168
WIRE 1776 1472 1728 1472
WIRE 480 1488 480 1392
WIRE 528 1488 480 1488
WIRE 1920 1488 1920 1440
WIRE 1920 1488 1840 1488
WIRE 2016 1488 1920 1488
WIRE 656 1504 656 1392
WIRE 656 1504 592 1504
WIRE 1392 1504 1392 1184
WIRE 1392 1504 656 1504
WIRE 1776 1504 1728 1504
WIRE 304 1520 304 1440
WIRE 528 1520 304 1520
WIRE 304 1552 304 1520
WIRE 1808 1552 1808 1520
WIRE 560 1584 560 1536
WIRE 304 1664 304 1632
WIRE 1728 1728 1728 1504
FLAG -80 -64 0
FLAG 160 -240 V_i
IOPIN 160 -240 BiDir
FLAG 624 -64 PWM
IOPIN 624 -64 BiDir
FLAG 1232 -64 MOS_H
IOPIN 1232 -64 BiDir
FLAG 1232 -32 MOS_MID
IOPIN 1232 -32 BiDir
FLAG 1232 0 MOS_O
IOPIN 1232 0 BiDir
FLAG 1888 -96 0
FLAG 1888 -240 vo
FLAG 1760 -240 V_o
IOPIN 1760 -240 BiDir
FLAG 2016 1488 PWM
IOPIN 2016 1488 BiDir
FLAG 1728 1728 V_f
IOPIN 1728 1728 BiDir
FLAG 1568 448 V_f
IOPIN 1568 448 BiDir
FLAG 1856 240 V_o
IOPIN 1856 240 BiDir
FLAG -160 336 MOS_H
IOPIN -160 336 BiDir
FLAG -160 480 MOS_MID
IOPIN -160 480 BiDir
FLAG -160 624 MOS_O
IOPIN -160 624 BiDir
FLAG 144 240 V_i
IOPIN 144 240 BiDir
FLAG 1184 480 V_o
IOPIN 1184 480 BiDir
FLAG -48 1136 0
FLAG 96 992 V_ref
IOPIN 96 992 BiDir
FLAG 304 1664 0
FLAG 560 1584 0
FLAG 1472 1232 0
FLAG 944 1216 0
FLAG 1808 1552 0
FLAG 1168 1152 V_cuadrada
FLAG 1696 1168 V_triangular
FLAG 64 -64 0
FLAG 144 720 0
FLAG 768 704 0
FLAG 544 704 0
FLAG 992 704 0
FLAG 672 64 0
FLAG 1648 672 0
FLAG 240 1312 V_ref
IOPIN 240 1312 BiDir
FLAG 944 944 V_ref
IOPIN 944 944 BiDir
FLAG 1472 944 V_ref
IOPIN 1472 944 BiDir
FLAG 1808 944 V_ref
IOPIN 1808 944 BiDir
FLAG 624 -208 V_REF
IOPIN 624 -208 BiDir
SYMBOL voltage -80 -208 R0
SYMATTR InstName V_IN
SYMATTR Value {V_IN}
SYMBOL res 1872 -224 R0
SYMATTR InstName R_L
SYMATTR Value {R_L}
SYMBOL voltage -48 1008 R0
SYMATTR InstName V_REF
SYMATTR Value {V_REF}
SYMBOL TL072 560 1440 R0
SYMATTR InstName U1
SYMBOL res 288 1344 R0
SYMATTR InstName R_PWM_IN3
SYMATTR Value {R_PWM_1}
SYMBOL res 288 1536 R0
SYMATTR InstName R_PWM_IN4
SYMATTR Value {R_PWM_2}
SYMBOL TL072 1472 1104 R0
SYMATTR InstName U2
SYMBOL cap 1504 1056 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C_PWM
SYMATTR Value {C_PWM}
SYMBOL res 1360 1136 R90
WINDOW 0 67 59 VBottom 2
WINDOW 3 73 53 VTop 2
SYMATTR InstName R_PWM_5
SYMATTR Value {R_PWM_5}
SYMBOL res 1040 1360 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R_PWM_4
SYMATTR Value {R_PWM_4}
SYMBOL res 992 1264 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R_PWM_3
SYMATTR Value {R_PWM_3}
SYMBOL res 1040 1136 M180
WINDOW 0 36 76 Left 2
WINDOW 3 28 46 Left 2
SYMATTR InstName R_PWM_6
SYMATTR Value {R_PWM_6}
SYMBOL res 1904 1344 R0
SYMATTR InstName R_PULLUP
SYMATTR Value {R_PULLUP}
SYMBOL cap 48 -176 R0
SYMATTR InstName C_IN
SYMATTR Value {C_IN}
SYMBOL lib\\sym\\nmos 96 288 R0
WINDOW 0 4 -3 Left 2
WINDOW 3 -49 102 Left 2
SYMATTR InstName M1
SYMATTR Value IRF510
SYMBOL lib\\sym\\nmos 96 576 R0
WINDOW 0 1 -10 Left 2
WINDOW 3 -49 104 Left 2
SYMATTR InstName M2
SYMATTR Value IRF510
SYMBOL res 16 320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1_BUCK
SYMATTR Value {R1_B}
SYMBOL res 16 608 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2_BUCK
SYMATTR Value {R2_B}
SYMBOL res 352 464 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L_ESR_BUCK
SYMATTR Value {L_ESR_B}
SYMBOL ind 496 464 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L_BUCK
SYMATTR Value {L_B}
SYMBOL res 528 512 R0
WINDOW 0 25 8 Left 2
WINDOW 3 43 52 Left 2
SYMATTR InstName C1_ESR_BUCK
SYMATTR Value {C1_ESR_B}
SYMBOL res 752 512 R0
WINDOW 0 26 6 Left 2
WINDOW 3 41 53 Left 2
SYMATTR InstName C2_ESR_BUCK
SYMATTR Value {C2_ESR_B}
SYMBOL cap 528 624 R0
SYMATTR InstName C1_BUCK
SYMATTR Value {C1_B}
SYMBOL cap 752 624 R0
SYMATTR InstName C2_BUCK
SYMATTR Value {C2_B}
SYMBOL lib\\sym\\zener 176 368 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value MBRS340
SYMBOL lib\\sym\\zener 176 656 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value MBRS340
SYMBOL lib\\sym\\LED 976 624 R0
SYMATTR InstName D3
SYMBOL res 976 512 R0
WINDOW 0 21 5 Left 2
WINDOW 3 38 54 Left 2
SYMATTR InstName R_CRIT_BUCK
SYMATTR Value {R_CRIT_B}
SYMBOL lib\\sym\\ir2104 768 -80 R0
SYMATTR InstName X1
SYMBOL cap 960 -176 R0
WINDOW 0 33 5 Left 2
WINDOW 3 28 62 Left 2
SYMATTR InstName C_BOOSTRAP_GD
SYMATTR Value {C_BOOSTRAP_GD}
SYMBOL lib\\sym\\OpAmps\\opamp2 944 1088 R0
SYMATTR InstName U4
SYMATTR Value LM393
SYMBOL lib\\sym\\OpAmps\\opamp2 1808 1424 R0
SYMATTR InstName U3
SYMATTR Value LM393
SYMBOL voltage 1648 464 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 6
SYMBOL lib\\sym\\zener 768 -224 M90
WINDOW 0 -4 32 VBottom 2
WINDOW 3 36 32 VTop 2
SYMATTR InstName D5
SYMATTR Value MBRS340
TEXT 640 112 Left 2 ;Gate driver
TEXT 256 1712 Left 2 ;PWM
TEXT -152 736 Left 2 ;Buck
TEXT -152 0 Left 2 ;Alimentación
TEXT 1768 -56 Left 2 ;Carga
TEXT 1576 736 Left 2 ;Realimentación
TEXT 2216 496 Left 2 ;Includes
TEXT 2224 560 Left 2 !.lib TL07xTI.txt
TEXT 2224 528 Left 2 !.inc LM393.5_1
TEXT -152 1200 Left 2 ;Referencia
TEXT 760 1408 Left 2 ;Cuadrada
TEXT 1240 1408 Left 2 ;Triangular
TEXT 2216 -208 Left 2 ;Buck
TEXT 3400 -272 Center 2 ;Parametros
TEXT 3032 -208 Left 2 ;PWM
TEXT 3848 -208 Left 2 ;Realimentación
TEXT 2224 144 Left 2 ;Gate Driver
TEXT 3856 144 Left 2 ;Referencia
TEXT 3032 144 Left 2 ;Entrada
TEXT 3432 144 Left 2 ;Carga
TEXT 3040 176 Left 2 !.param V_IN 30
TEXT 3440 176 Left 2 !.param R_L 22
TEXT 3856 -176 Left 2 !.param V_F 3.15
TEXT 3856 -144 Left 2 !.param F_RL 6.84k
TEXT 1656 184 Left 2 ;lazo abierto
TEXT 3856 176 Left 2 !.param V_REF 12
TEXT 3040 -176 Left 2 !.param R_PULLUP 10k
TEXT 3040 208 Left 2 !.param C_IN 1n
TEXT 3040 -144 Left 2 !.param R_PWM_1 100k
TEXT 3040 -112 Left 2 !.param R_PWM_2 R_PWM_1
TEXT 3040 -80 Left 2 !.param R_PWM_3 100k
TEXT 3040 -48 Left 2 !.param R_PWM_4 47k
TEXT 3040 -16 Left 2 !.param R_PWM_5 8k2
TEXT 3040 16 Left 2 !.param R_PWM_6 1k5
TEXT 3040 48 Left 2 !.param C_PWM 330p
TEXT 2224 -176 Left 2 !.param R1_B 10
TEXT 2224 -144 Left 2 !.param R2_B R1_B
TEXT 2224 -112 Left 2 !.param L_ESR_B 0.1
TEXT 2224 -80 Left 2 !.param C1_ESR_B 2
TEXT 2224 -48 Left 2 !.param C2_ESR_B 0.01
TEXT 2224 -16 Left 2 !.param R_CRIT_B 35
TEXT 2224 16 Left 2 !.param L_B 310u
TEXT 2224 48 Left 2 !.param C1_B 2.2u
TEXT 2224 80 Left 2 !.param C2_B 12n
TEXT 2224 176 Left 2 !.param C_BOOSTRAP_GD 2.2u
TEXT 2216 944 Left 2 ;Variacion de tension de entrada
TEXT 3400 880 Center 2 ;Funciones
TEXT 2224 976 Left 2 ;.tran 0 125u 25u\n;step param V_IN 12 30 0.5
TEXT 2224 1120 Left 2 !.tran 0 350u 0 startup
TEXT 616 -720 Left 2 ;investigar mejor el IR2104
TEXT 616 -688 Left 2 ;verificar potencias de los mos
TEXT 616 -656 Left 2 ;calcular capacitor de boostrap
TEXT 616 -624 Left 2 ;investigar que onda los diodos para ver si hay \nalgo mas rapido especialmente para la parte \ndel gate driver
TEXT 616 -536 Left 2 ;Calcular R critica
TEXT 616 -512 Left 2 ;Hacer una fuente de 6v pero pedir de afuera \nuna tension de 12 para el IR2104
LINE Normal 3008 -192 2208 -192 2
LINE Normal 3824 -192 3024 -192 2
LINE Normal 4640 -192 3840 -192 2
LINE Normal 3008 160 2208 160 2
LINE Normal 4640 160 3840 160 2
LINE Normal 3824 160 3024 160 2
LINE Normal 3424 464 3424 128 2
LINE Normal 3008 512 2208 512 2
LINE Normal 3408 960 2208 960 2
LINE Normal 4640 960 3440 960 2
RECTANGLE Normal 1232 128 624 -288 2
RECTANGLE Normal 2016 1728 240 944 2
RECTANGLE Normal 1184 752 -160 240 2
RECTANGLE Normal 160 16 -160 -288 2
RECTANGLE Normal 2016 -32 1760 -288 2
RECTANGLE Normal 2016 752 1568 240 2
RECTANGLE Normal 96 1216 -160 944 2
RECTANGLE Normal 1120 1424 752 976 2
RECTANGLE Normal 1664 1424 1232 976 2
RECTANGLE Normal 3008 112 2208 -224 2
RECTANGLE Normal 4640 -256 2208 -288 2
RECTANGLE Normal 3824 112 3024 -224 2
RECTANGLE Normal 4640 112 3840 -224 2
RECTANGLE Normal 3008 464 2208 128 2
RECTANGLE Normal 4640 464 3840 128 2
RECTANGLE Normal 3824 464 3024 128 2
RECTANGLE Normal 3008 816 2208 480 2
RECTANGLE Normal 3408 1264 2208 928 2
RECTANGLE Normal 4640 896 2208 864 2
RECTANGLE Normal 4640 1264 3440 928 2
