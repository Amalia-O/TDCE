Version 4.1
SHEET 1 5500 2260
WIRE 480 -256 480 -288
WIRE 528 -256 480 -256
WIRE -640 -240 -784 -240
WIRE -544 -240 -640 -240
WIRE 480 -240 480 -256
WIRE 1888 -240 1760 -240
WIRE -256 -224 -256 -288
WIRE -128 -224 -256 -224
WIRE 32 -224 -64 -224
WIRE 80 -224 32 -224
WIRE 528 -224 528 -256
WIRE 1888 -208 1888 -240
WIRE -784 -192 -784 -240
WIRE 80 -192 80 -224
WIRE 224 -192 128 -192
WIRE 368 -192 304 -192
WIRE -640 -176 -640 -240
WIRE 368 -160 368 -192
WIRE 432 -160 368 -160
WIRE 480 -128 480 -144
WIRE 528 -128 528 -160
WIRE 528 -128 480 -128
WIRE -256 -112 -256 -224
WIRE -160 -112 -256 -112
WIRE 32 -112 32 -224
WIRE 32 -112 -16 -112
WIRE 1888 -96 1888 -128
WIRE -160 -80 -304 -80
WIRE 128 -80 128 -192
WIRE 128 -80 -16 -80
WIRE -784 -64 -784 -112
WIRE -640 -64 -640 -112
WIRE -256 -48 -256 -112
WIRE -160 -48 -256 -48
WIRE 80 -48 80 -128
WIRE 80 -48 -16 -48
WIRE 480 -48 480 -128
WIRE 480 -48 80 -48
WIRE 592 -48 480 -48
WIRE 736 -48 672 -48
WIRE 880 -48 816 -48
WIRE 1104 -48 880 -48
WIRE 1328 -48 1104 -48
WIRE 1520 -48 1328 -48
WIRE -160 -16 -256 -16
WIRE 128 -16 -16 -16
WIRE 880 0 880 -48
WIRE 1104 0 1104 -48
WIRE 1328 0 1328 -48
WIRE 480 32 480 -48
WIRE 528 32 480 32
WIRE -256 48 -256 -16
WIRE 480 48 480 32
WIRE 528 64 528 32
WIRE 128 96 128 -16
WIRE 224 96 128 96
WIRE 368 96 304 96
WIRE 880 96 880 80
WIRE 1104 96 1104 80
WIRE 1328 96 1328 80
WIRE 368 128 368 96
WIRE 432 128 368 128
WIRE 480 160 480 144
WIRE 528 160 528 128
WIRE 528 160 480 160
WIRE 880 176 880 160
WIRE 1104 176 1104 160
WIRE 1328 176 1328 160
WIRE 480 192 480 160
WIRE 1712 416 1712 400
WIRE 1952 416 1952 400
WIRE -944 448 -944 416
WIRE -736 448 -944 448
WIRE -448 448 -656 448
WIRE -320 448 -448 448
WIRE -208 448 -320 448
WIRE -112 448 -208 448
WIRE 368 464 368 400
WIRE 480 464 368 464
WIRE -448 480 -448 448
WIRE -944 496 -944 448
WIRE -736 496 -736 448
WIRE 480 496 480 464
WIRE 928 528 816 528
WIRE 1024 528 992 528
WIRE -800 544 -832 544
WIRE -832 576 -832 544
WIRE -448 576 -448 560
WIRE 368 576 368 464
WIRE 336 592 112 592
WIRE 896 592 896 400
WIRE 480 608 480 576
WIRE 480 608 400 608
WIRE 592 608 480 608
WIRE 688 608 592 608
WIRE 816 608 816 528
WIRE 816 608 768 608
WIRE 864 608 816 608
WIRE 1824 608 1616 608
WIRE -944 624 -944 576
WIRE -896 624 -944 624
WIRE 336 624 240 624
WIRE 1024 624 1024 528
WIRE 1024 624 928 624
WIRE 1120 624 1024 624
WIRE 1152 624 1120 624
WIRE 864 640 816 640
WIRE 1824 640 1824 608
WIRE 368 672 368 640
WIRE -448 688 -448 656
WIRE -400 688 -448 688
WIRE -320 688 -320 448
WIRE 896 688 896 656
WIRE -240 704 -256 704
WIRE -112 704 -240 704
WIRE -944 720 -944 624
WIRE -880 720 -944 720
WIRE -832 720 -832 672
WIRE -736 720 -736 592
WIRE -736 720 -832 720
WIRE -656 720 -656 448
WIRE -656 720 -736 720
WIRE -448 720 -448 688
WIRE -400 720 -416 720
WIRE -656 736 -656 720
WIRE 240 736 240 624
WIRE 320 736 240 736
WIRE 480 736 480 608
WIRE 480 736 400 736
WIRE -880 752 -880 720
WIRE -736 752 -736 720
WIRE -416 768 -416 720
WIRE -240 768 -240 704
WIRE -240 768 -416 768
WIRE 1232 768 1232 400
WIRE 1344 768 1232 768
WIRE 1824 784 1824 720
WIRE -320 800 -320 720
WIRE 1344 816 1344 768
WIRE -944 832 -944 720
WIRE -656 832 -656 800
WIRE 240 832 240 736
WIRE 368 832 240 832
WIRE 1024 832 1024 624
WIRE 1024 832 448 832
WIRE -880 864 -880 816
WIRE -880 864 -912 864
WIRE -736 864 -736 832
WIRE -736 864 -880 864
WIRE -448 864 -448 800
WIRE -288 864 -448 864
WIRE -208 864 -208 448
WIRE -128 880 -144 880
WIRE -112 880 -128 880
WIRE -736 896 -736 864
WIRE -448 896 -448 864
WIRE -288 896 -304 896
WIRE 1232 912 1232 768
WIRE 1152 928 1152 624
WIRE 1200 928 1152 928
WIRE -304 944 -304 896
WIRE -224 944 -224 912
WIRE -224 944 -304 944
WIRE -128 944 -128 880
WIRE -128 944 -224 944
WIRE 1344 944 1344 896
WIRE 1344 944 1264 944
WIRE 1440 944 1344 944
WIRE 112 960 112 592
WIRE 112 960 48 960
WIRE 816 960 816 640
WIRE 816 960 112 960
WIRE 1200 960 1152 960
WIRE -208 976 -208 896
WIRE -944 1008 -944 896
WIRE -736 1008 -736 976
WIRE -448 1008 -448 976
WIRE 1232 1008 1232 976
WIRE 1152 1072 1152 960
FLAG -784 -64 0
FLAG -544 -240 V_i
IOPIN -544 -240 BiDir
FLAG -304 -80 PWM
IOPIN -304 -80 BiDir
FLAG 1888 -96 0
FLAG 1888 -240 vo
FLAG 1760 -240 V_o
IOPIN 1760 -240 BiDir
FLAG 1440 944 PWM
IOPIN 1440 944 BiDir
FLAG 1152 1072 V_f
IOPIN 1152 1072 BiDir
FLAG 1616 608 V_f
IOPIN 1616 608 BiDir
FLAG 1952 400 V_o
IOPIN 1952 400 BiDir
FLAG 480 -288 V_i
IOPIN 480 -288 BiDir
FLAG 1520 -48 V_o
IOPIN 1520 -48 BiDir
FLAG -112 448 V_11
IOPIN -112 448 BiDir
FLAG 896 688 0
FLAG 368 672 0
FLAG 1232 1008 0
FLAG 592 608 V_cuadrada
FLAG 1120 624 V_triangular
FLAG -640 -64 0
FLAG 480 192 0
FLAG 1104 176 0
FLAG 880 176 0
FLAG 1328 176 0
FLAG -256 48 0
FLAG 1824 784 0
FLAG -112 704 V_6
IOPIN -112 704 BiDir
FLAG -112 880 V_3
IOPIN -112 880 BiDir
FLAG 48 960 V_3
IOPIN 48 960 BiDir
FLAG 368 400 V_6
IOPIN 368 400 BiDir
FLAG 896 400 V_6
IOPIN 896 400 BiDir
FLAG 1232 400 V_6
IOPIN 1232 400 BiDir
FLAG -256 -288 V_11
IOPIN -256 -288 BiDir
FLAG -320 800 0
FLAG -208 976 0
FLAG -448 1008 0
FLAG -944 416 V_i
IOPIN -944 416 BiDir
FLAG -736 1008 0
FLAG -944 1008 0
FLAG 1712 400 V_6
IOPIN 1712 400 BiDir
FLAG -656 832 0
SYMBOL voltage -784 -208 R0
SYMATTR InstName V_IN
SYMATTR Value {V_IN}
SYMBOL res 1872 -224 R0
SYMATTR InstName R_L
SYMATTR Value {R_L}
SYMBOL TL072 896 560 R0
SYMATTR InstName U2
SYMBOL cap 928 512 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C_PWM
SYMATTR Value {C_PWM}
SYMBOL res 784 592 R90
WINDOW 0 67 59 VBottom 2
WINDOW 3 73 53 VTop 2
SYMATTR InstName R_PWM_5
SYMATTR Value {R_PWM_5}
SYMBOL res 464 816 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R_PWM_4
SYMATTR Value {R_PWM_4}
SYMBOL res 416 720 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R_PWM_3
SYMATTR Value {R_PWM_3}
SYMBOL res 464 592 M180
WINDOW 0 36 76 Left 2
WINDOW 3 28 46 Left 2
SYMATTR InstName R_PWM_6
SYMATTR Value {R_PWM_6}
SYMBOL res 1328 800 R0
SYMATTR InstName R_PULLUP
SYMATTR Value {R_PULLUP}
SYMBOL cap -656 -176 R0
SYMATTR InstName C_IN
SYMATTR Value {C_IN}
SYMBOL lib\\sym\\nmos 432 -240 R0
WINDOW 0 4 -3 Left 2
WINDOW 3 -49 102 Left 2
SYMATTR InstName M1
SYMATTR Value IRF510
SYMBOL lib\\sym\\nmos 432 48 R0
WINDOW 0 1 -10 Left 2
WINDOW 3 -49 104 Left 2
SYMATTR InstName M2
SYMATTR Value IRF510
SYMBOL res 320 -208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1_BUCK
SYMATTR Value {R1_B}
SYMBOL res 320 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2_BUCK
SYMATTR Value {R2_B}
SYMBOL res 688 -64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L_ESR_BUCK
SYMATTR Value {L_ESR_B}
SYMBOL ind 832 -64 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L_BUCK
SYMATTR Value {L_B}
SYMBOL res 864 -16 R0
WINDOW 0 25 8 Left 2
WINDOW 3 43 52 Left 2
SYMATTR InstName C1_ESR_BUCK
SYMATTR Value {C1_ESR_B}
SYMBOL res 1088 -16 R0
WINDOW 0 26 6 Left 2
WINDOW 3 41 53 Left 2
SYMATTR InstName C2_ESR_BUCK
SYMATTR Value {C2_ESR_B}
SYMBOL cap 864 96 R0
SYMATTR InstName C1_BUCK
SYMATTR Value {C1_B}
SYMBOL cap 1088 96 R0
SYMATTR InstName C2_BUCK
SYMATTR Value {C2_B}
SYMBOL lib\\sym\\zener 512 -160 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value MBRS340
SYMBOL lib\\sym\\zener 512 128 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value MBRS340
SYMBOL lib\\sym\\LED 1312 96 R0
SYMATTR InstName D3
SYMBOL res 1312 -16 R0
WINDOW 0 21 5 Left 2
WINDOW 3 38 54 Left 2
SYMATTR InstName R_CRIT_BUCK
SYMATTR Value {R_CRIT_B}
SYMBOL lib\\sym\\ir2104 -128 -96 R0
SYMATTR InstName X1
SYMBOL cap 64 -192 R0
WINDOW 0 -62 -83 Left 2
WINDOW 3 -79 -52 Left 2
SYMATTR InstName C_BOOSTRAP_GD
SYMATTR Value {C_BOOSTRAP_GD}
SYMBOL lib\\sym\\OpAmps\\opamp2 368 544 R0
SYMATTR InstName U4
SYMATTR Value LM393
SYMBOL lib\\sym\\OpAmps\\opamp2 1232 880 R0
SYMATTR InstName U3
SYMATTR Value LM393
SYMBOL lib\\sym\\zener -128 -240 M90
WINDOW 0 -4 32 VBottom 2
WINDOW 3 36 32 VTop 2
SYMATTR InstName D5
SYMATTR Value MBRS340
SYMBOL voltage 1824 624 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 4
SYMBOL res -432 704 M0
SYMATTR InstName R1
SYMATTR Value {R_REF_3}
SYMBOL res -432 464 M0
SYMATTR InstName R3
SYMATTR Value {R_REF_1}
SYMBOL res -432 560 M0
SYMATTR InstName R4
SYMATTR Value {R_REF_2}
SYMBOL res -432 880 M0
SYMATTR InstName R2
SYMATTR Value {R_REF_3}
SYMBOL LM358 -352 704 R0
SYMATTR InstName U6
SYMBOL LM358 -240 880 R0
SYMATTR InstName U1
SYMBOL tl431 -928 832 M0
SYMATTR InstName U5
SYMBOL res -960 480 R0
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL lib\\sym\\npn -896 576 R0
SYMATTR InstName Q1
SYMATTR Value BC547C
SYMBOL res -752 736 R0
SYMATTR InstName R7
SYMATTR Value 5k1
SYMBOL res -752 880 R0
SYMATTR InstName R8
SYMATTR Value 1k5
SYMBOL cap -864 752 M0
SYMATTR InstName C1
SYMATTR Value 1n
SYMBOL lib\\sym\\pnp -800 592 M180
SYMATTR InstName BC557B
SYMBOL cap -672 736 R0
SYMATTR InstName C2
SYMATTR Value 12n
TEXT 64 1056 Left 2 ;PWM
TEXT -296 208 Left 2 ;Buck
TEXT -856 0 Left 2 ;Alimentación
TEXT 1768 -56 Left 2 ;Carga
TEXT 1624 880 Left 2 ;Realimentación
TEXT 3848 144 Left 2 ;Includes
TEXT 3856 208 Left 2 !.lib TL07xTI.txt
TEXT 3856 176 Left 2 !.inc LM393.5_1
TEXT -1016 1056 Left 2 ;Referencia
TEXT 184 864 Left 2 ;Cuadrada
TEXT 664 864 Left 2 ;Triangular
TEXT 2216 -208 Left 2 ;Buck
TEXT 3400 -272 Center 2 ;Parametros
TEXT 3032 -208 Left 2 ;PWM
TEXT 3848 -208 Left 2 ;Realimentación
TEXT 2216 144 Left 2 ;Referencia
TEXT 3032 144 Left 2 ;Entrada
TEXT 3432 144 Left 2 ;Carga
TEXT 3040 176 Left 2 !.param V_IN 12
TEXT 3440 176 Left 2 !.param R_L 22
TEXT 3856 -176 Left 2 !.param V_F 3.15
TEXT 3856 -144 Left 2 !.param F_RL 6.84k
TEXT 2224 176 Left 2 !.param V_REF 11
TEXT 3040 -176 Left 2 !.param R_PULLUP 10k
TEXT 3040 208 Left 2 !.param C_IN 1n
TEXT 2224 208 Left 2 !.param R_REF_1 150k
TEXT 3040 -80 Left 2 !.param R_PWM_3 100k
TEXT 3040 -48 Left 2 !.param R_PWM_4 47k
TEXT 3040 -16 Left 2 !.param R_PWM_5 8k2
TEXT 3040 16 Left 2 !.param R_PWM_6 1k5
TEXT 3040 48 Left 2 !.param C_PWM 330p
TEXT 2224 -176 Left 2 !.param R1_B 10
TEXT 2224 -144 Left 2 !.param R2_B R1_B
TEXT 2224 -112 Left 2 !.param L_ESR_B 0.1
TEXT 2224 -80 Left 2 !.param C1_ESR_B 2
TEXT 2224 -48 Left 2 !.param C2_ESR_B 0.01
TEXT 2224 -16 Left 2 !.param R_CRIT_B 1k
TEXT 2224 16 Left 2 !.param L_B 310u
TEXT 2224 48 Left 2 !.param C1_B 2.2u
TEXT 2224 80 Left 2 !.param C2_B 12n
TEXT 2216 592 Left 2 ;Variacion de tension de entrada
TEXT 3400 528 Center 2 ;Funciones
TEXT 2224 624 Left 2 ;.tran 0 125u 25u\n;step param V_IN 12 30 0.5
TEXT 2224 768 Left 2 !.tran 0 500u 0 startup
TEXT 616 -720 Left 2 ;investigar mejor el IR2104
TEXT 616 -688 Left 2 ;verificar potencias de los mos
TEXT 616 -656 Left 2 ;calcular capacitor de boostrap
TEXT 616 -624 Left 2 ;investigar que onda los diodos para ver si hay \nalgo mas rapido especialmente para la parte \ndel gate driver
TEXT 616 -536 Left 2 ;Calcular R critica
TEXT 616 -512 Left 2 ;Hacer una fuente de 6v pero pedir de afuera \nuna tension de 12 para el IR2104
TEXT 3040 272 Left 2 ;.step param V_IN list 12 30
TEXT 2600 -176 Left 2 !.param C_BOOSTRAP_GD 2.2u
TEXT 3856 240 Left 2 !.lib TL783.lib
TEXT 2224 240 Left 2 !.param R_REF_2 15k
TEXT 2224 272 Left 2 !.param R_REF_3 100k
TEXT 3856 272 Left 2 !.include tl431.lib
LINE Normal 3008 -192 2208 -192 2
LINE Normal 3824 -192 3024 -192 2
LINE Normal 4640 -192 3840 -192 2
LINE Normal 3008 160 2208 160 2
LINE Normal 4640 160 3840 160 2
LINE Normal 3824 160 3024 160 2
LINE Normal 3424 464 3424 128 2
LINE Normal 3408 608 2208 608 2
LINE Normal 4640 608 3440 608 2
RECTANGLE Normal 1440 1072 48 400 2
RECTANGLE Normal 1520 224 -304 -288 2
RECTANGLE Normal -544 16 -864 -288 2
RECTANGLE Normal 2016 -32 1760 -288 2
RECTANGLE Normal 2016 896 1616 400 2
RECTANGLE Normal -112 1072 -1024 416 2
RECTANGLE Normal 544 880 176 432 2
RECTANGLE Normal 1088 880 656 432 2
RECTANGLE Normal 3008 112 2208 -224 2
RECTANGLE Normal 4640 -256 2208 -288 2
RECTANGLE Normal 3824 112 3024 -224 2
RECTANGLE Normal 4640 112 3840 -224 2
RECTANGLE Normal 3008 464 2208 128 2
RECTANGLE Normal 4640 464 3840 128 2
RECTANGLE Normal 3824 464 3024 128 2
RECTANGLE Normal 3408 912 2208 576 2
RECTANGLE Normal 4640 544 2208 512 2
RECTANGLE Normal 4640 912 3440 576 2
