Version 4.1
SHEET 1 5500 3012
WIRE 384 -272 384 -304
WIRE 432 -272 384 -272
WIRE 384 -256 384 -272
WIRE -1072 -240 -1216 -240
WIRE -976 -240 -1072 -240
WIRE -352 -240 -352 -304
WIRE -224 -240 -352 -240
WIRE -64 -240 -160 -240
WIRE -16 -240 -64 -240
WIRE 432 -240 432 -272
WIRE 1984 -240 1856 -240
WIRE -16 -208 -16 -240
WIRE 128 -208 32 -208
WIRE 272 -208 208 -208
WIRE 1984 -208 1984 -240
WIRE -1216 -192 -1216 -240
WIRE -1072 -176 -1072 -240
WIRE 272 -176 272 -208
WIRE 336 -176 272 -176
WIRE 384 -144 384 -160
WIRE 432 -144 432 -176
WIRE 432 -144 384 -144
WIRE -352 -128 -352 -240
WIRE -256 -128 -352 -128
WIRE -64 -128 -64 -240
WIRE -64 -128 -112 -128
WIRE -256 -96 -400 -96
WIRE 32 -96 32 -208
WIRE 32 -96 -112 -96
WIRE 1984 -96 1984 -128
WIRE -1216 -64 -1216 -112
WIRE -1072 -64 -1072 -112
WIRE -352 -64 -352 -128
WIRE -256 -64 -352 -64
WIRE -16 -64 -16 -144
WIRE -16 -64 -112 -64
WIRE 384 -64 384 -144
WIRE 384 -64 -16 -64
WIRE 496 -64 384 -64
WIRE 640 -64 576 -64
WIRE 784 -64 720 -64
WIRE 1008 -64 784 -64
WIRE 1232 -64 1008 -64
WIRE 1424 -64 1232 -64
WIRE -256 -32 -352 -32
WIRE 32 -32 -112 -32
WIRE 784 -16 784 -64
WIRE 1008 -16 1008 -64
WIRE 1232 -16 1232 -64
WIRE 384 16 384 -64
WIRE 432 16 384 16
WIRE -352 32 -352 -32
WIRE 384 32 384 16
WIRE 432 48 432 16
WIRE 32 80 32 -32
WIRE 128 80 32 80
WIRE 272 80 208 80
WIRE 784 80 784 64
WIRE 1008 80 1008 64
WIRE 1232 80 1232 64
WIRE 272 112 272 80
WIRE 336 112 272 112
WIRE 384 144 384 128
WIRE 432 144 432 112
WIRE 432 144 384 144
WIRE 784 160 784 144
WIRE 1008 160 1008 144
WIRE 1232 160 1232 144
WIRE 384 176 384 144
WIRE -1216 400 -1216 368
WIRE -1008 400 -1216 400
WIRE -448 400 -928 400
WIRE -384 400 -448 400
WIRE 2000 400 2000 368
WIRE 2000 400 1888 400
WIRE 96 432 96 368
WIRE 208 432 96 432
WIRE 2000 432 2000 400
WIRE -1216 448 -1216 400
WIRE -1008 448 -1008 400
WIRE -928 448 -928 400
WIRE -864 448 -928 448
WIRE -720 448 -784 448
WIRE 1888 448 1888 400
WIRE 208 464 208 432
WIRE -720 480 -720 448
WIRE 1648 480 1648 368
WIRE 1712 480 1648 480
WIRE -1072 496 -1104 496
WIRE 656 496 544 496
WIRE 752 496 720 496
WIRE 1712 512 1712 480
WIRE -1104 528 -1104 496
WIRE -448 544 -448 400
WIRE -448 544 -592 544
WIRE 96 544 96 432
WIRE 64 560 -160 560
WIRE 624 560 624 368
WIRE 1888 560 1888 512
WIRE 2000 560 2000 512
WIRE -1216 576 -1216 528
WIRE -1168 576 -1216 576
WIRE 208 576 208 544
WIRE 208 576 128 576
WIRE 320 576 208 576
WIRE 416 576 320 576
WIRE 544 576 544 496
WIRE 544 576 496 576
WIRE 592 576 544 576
WIRE -720 592 -720 560
WIRE -672 592 -720 592
WIRE -592 592 -592 544
WIRE 64 592 -32 592
WIRE 752 592 752 496
WIRE 752 592 656 592
WIRE 848 592 752 592
WIRE 880 592 848 592
WIRE -512 608 -528 608
WIRE -384 608 -512 608
WIRE 592 608 544 608
WIRE 1712 608 1712 576
WIRE -720 624 -720 592
WIRE -672 624 -688 624
WIRE 96 640 96 608
WIRE 1504 640 1504 368
WIRE 1648 640 1648 480
WIRE 1648 640 1584 640
WIRE 624 656 624 624
WIRE 1376 656 1312 656
WIRE 1440 656 1376 656
WIRE -1216 672 -1216 576
WIRE -1152 672 -1216 672
WIRE -1104 672 -1104 624
WIRE -1008 672 -1008 544
WIRE -1008 672 -1104 672
WIRE -928 672 -928 448
WIRE -928 672 -1008 672
WIRE -688 672 -688 624
WIRE -512 672 -512 608
WIRE -512 672 -688 672
WIRE 1712 672 1584 672
WIRE 1888 672 1888 640
WIRE 1888 672 1712 672
WIRE 2000 672 2000 640
WIRE 2000 672 1888 672
WIRE -928 688 -928 672
WIRE -1152 704 -1152 672
WIRE -1008 704 -1008 672
WIRE -592 704 -592 624
WIRE -32 704 -32 592
WIRE 48 704 -32 704
WIRE 208 704 208 576
WIRE 208 704 128 704
WIRE 2000 720 2000 672
WIRE -448 736 -448 544
WIRE -448 736 -592 736
WIRE 960 736 960 368
WIRE 1072 736 960 736
WIRE 1504 736 1504 672
WIRE -1216 784 -1216 672
WIRE -928 784 -928 752
WIRE -720 784 -720 704
WIRE -672 784 -720 784
WIRE -592 784 -592 736
WIRE 1072 784 1072 736
WIRE 1376 784 1376 656
WIRE 1440 784 1376 784
WIRE 1584 784 1504 784
WIRE 1712 784 1712 672
WIRE 1712 784 1664 784
WIRE -512 800 -528 800
WIRE -384 800 -512 800
WIRE -32 800 -32 704
WIRE 96 800 -32 800
WIRE 752 800 752 592
WIRE 752 800 176 800
WIRE -1152 816 -1152 768
WIRE -1152 816 -1184 816
WIRE -1008 816 -1008 784
WIRE -1008 816 -1152 816
WIRE -672 816 -688 816
WIRE -720 832 -720 784
WIRE -1008 848 -1008 816
WIRE 2000 848 2000 800
WIRE -688 864 -688 816
WIRE -608 864 -608 832
WIRE -608 864 -688 864
WIRE -512 864 -512 800
WIRE -512 864 -608 864
WIRE 1376 864 1376 784
WIRE 1520 864 1376 864
WIRE 1712 864 1712 784
WIRE 1712 864 1584 864
WIRE 960 880 960 736
WIRE -592 896 -592 816
WIRE 880 896 880 592
WIRE 928 896 880 896
WIRE 1072 912 1072 864
WIRE 1072 912 992 912
WIRE 1168 912 1072 912
WIRE -448 928 -448 736
WIRE -448 928 -592 928
WIRE -160 928 -160 560
WIRE -160 928 -224 928
WIRE 544 928 544 608
WIRE 544 928 -160 928
WIRE 928 928 880 928
WIRE -1216 960 -1216 848
WIRE -1008 960 -1008 928
WIRE -720 960 -720 912
WIRE -672 960 -720 960
WIRE -592 960 -592 928
WIRE -720 976 -720 960
WIRE -512 976 -528 976
WIRE -384 976 -512 976
WIRE 960 976 960 944
WIRE -672 992 -688 992
WIRE -688 1040 -688 992
WIRE -608 1040 -608 1008
WIRE -608 1040 -688 1040
WIRE -512 1040 -512 976
WIRE -512 1040 -608 1040
WIRE 880 1040 880 928
WIRE -592 1072 -592 992
WIRE -720 1088 -720 1056
WIRE -1024 1296 -1232 1296
WIRE -224 1296 -1024 1296
WIRE -80 1296 -224 1296
WIRE 496 1296 -80 1296
WIRE 528 1296 496 1296
WIRE 624 1296 592 1296
WIRE 848 1296 624 1296
WIRE -224 1344 -224 1296
WIRE 496 1344 496 1296
WIRE 512 1344 496 1344
WIRE 624 1344 624 1296
WIRE 624 1344 608 1344
WIRE -1232 1360 -1232 1296
WIRE -1024 1360 -1024 1296
WIRE -80 1360 -80 1296
WIRE -1088 1408 -1120 1408
WIRE -1120 1440 -1120 1408
WIRE -736 1440 -944 1440
WIRE -496 1440 -736 1440
WIRE 624 1440 560 1440
WIRE 848 1440 848 1296
WIRE 848 1440 624 1440
WIRE 928 1440 848 1440
WIRE 1072 1440 1008 1440
WIRE 1216 1440 1152 1440
WIRE 1344 1440 1216 1440
WIRE 1456 1440 1344 1440
WIRE 1680 1440 1456 1440
WIRE 1824 1440 1680 1440
WIRE -736 1472 -736 1440
WIRE -224 1472 -224 1424
WIRE -80 1472 -80 1424
WIRE 560 1472 560 1440
WIRE 1824 1472 1824 1440
WIRE -1232 1488 -1232 1440
WIRE -1184 1488 -1232 1488
WIRE 592 1488 592 1392
WIRE 1216 1488 1216 1440
WIRE 1344 1488 1344 1440
WIRE 1456 1488 1456 1440
WIRE 848 1520 848 1440
WIRE 896 1520 848 1520
WIRE 848 1536 848 1520
WIRE 896 1552 896 1520
WIRE -1232 1584 -1232 1488
WIRE -1168 1584 -1232 1584
WIRE -1120 1584 -1120 1536
WIRE -1024 1584 -1024 1456
WIRE -1024 1584 -1120 1584
WIRE -944 1584 -944 1440
WIRE -944 1584 -1024 1584
WIRE -736 1584 -736 1552
WIRE -496 1584 -496 1440
WIRE 432 1584 -496 1584
WIRE 448 1584 432 1584
WIRE 560 1584 560 1536
WIRE 560 1584 512 1584
WIRE 1216 1584 1216 1568
WIRE 1344 1584 1344 1568
WIRE 1456 1584 1456 1568
WIRE 1824 1584 1824 1552
WIRE -1168 1616 -1168 1584
WIRE -1024 1616 -1024 1584
WIRE 672 1616 656 1616
WIRE 800 1616 752 1616
WIRE -944 1632 -944 1584
WIRE -496 1648 -496 1584
WIRE -496 1648 -608 1648
WIRE 560 1648 560 1584
WIRE 592 1648 592 1568
WIRE 624 1648 624 1440
WIRE 656 1648 656 1616
WIRE 848 1648 848 1632
WIRE 896 1648 896 1616
WIRE 896 1648 848 1648
WIRE 1216 1664 1216 1648
WIRE 1344 1664 1344 1648
WIRE 1456 1664 1456 1648
WIRE 848 1680 848 1648
WIRE -1232 1696 -1232 1584
WIRE -736 1712 -736 1664
WIRE -688 1712 -736 1712
WIRE -608 1712 -608 1648
WIRE -1168 1728 -1168 1680
WIRE -1168 1728 -1200 1728
WIRE -1024 1728 -1024 1696
WIRE -1024 1728 -1168 1728
WIRE -944 1728 -944 1696
WIRE -528 1728 -544 1728
WIRE -304 1728 -528 1728
WIRE -192 1728 -304 1728
WIRE 112 1728 -192 1728
WIRE 368 1728 112 1728
WIRE -688 1744 -704 1744
WIRE -1024 1760 -1024 1728
WIRE -736 1792 -736 1712
WIRE -704 1792 -704 1744
WIRE -528 1792 -528 1728
WIRE -528 1792 -704 1792
WIRE -192 1808 -192 1728
WIRE -608 1824 -608 1744
WIRE 144 1840 32 1840
WIRE 240 1840 208 1840
WIRE 432 1840 432 1584
WIRE 560 1840 560 1792
WIRE 560 1840 432 1840
WIRE 624 1840 624 1792
WIRE 624 1840 560 1840
WIRE 656 1840 656 1792
WIRE 720 1840 656 1840
WIRE -1232 1872 -1232 1760
WIRE -1024 1872 -1024 1840
WIRE -496 1872 -496 1648
WIRE -496 1872 -608 1872
WIRE -304 1888 -304 1728
WIRE -336 1904 -464 1904
WIRE 112 1904 112 1728
WIRE -192 1920 -192 1888
WIRE -192 1920 -272 1920
WIRE -112 1920 -192 1920
WIRE 32 1920 32 1840
WIRE 32 1920 -32 1920
WIRE 80 1920 32 1920
WIRE -736 1936 -736 1872
WIRE -688 1936 -736 1936
WIRE -608 1936 -608 1872
WIRE -336 1936 -432 1936
WIRE 240 1936 240 1840
WIRE 240 1936 144 1936
WIRE 304 1936 240 1936
WIRE 368 1936 368 1728
WIRE 448 1936 368 1936
WIRE 1056 1936 448 1936
WIRE 1680 1936 1680 1440
WIRE 1680 1936 1568 1936
WIRE -528 1952 -544 1952
WIRE -464 1952 -464 1904
WIRE -464 1952 -528 1952
WIRE 80 1952 32 1952
WIRE -688 1968 -704 1968
WIRE -304 1984 -304 1952
WIRE 448 1984 448 1936
WIRE 1568 1984 1568 1936
WIRE 1680 1984 1680 1936
WIRE -736 2000 -736 1936
WIRE 112 2000 112 1968
WIRE -704 2016 -704 1968
WIRE -624 2016 -624 1984
WIRE -624 2016 -704 2016
WIRE -528 2016 -528 1952
WIRE -528 2016 -624 2016
WIRE -608 2048 -608 1968
WIRE -432 2048 -432 1936
WIRE -352 2048 -432 2048
WIRE -192 2048 -192 1920
WIRE -192 2048 -272 2048
WIRE -496 2080 -496 1872
WIRE -496 2080 -608 2080
WIRE 368 2080 368 1936
WIRE 304 2096 304 1936
WIRE 336 2096 304 2096
WIRE 1200 2096 800 2096
WIRE 448 2112 448 2064
WIRE 448 2112 400 2112
WIRE 592 2112 592 1792
WIRE 592 2112 448 2112
WIRE 1568 2112 1568 2048
WIRE 1680 2112 1680 2064
WIRE 336 2128 304 2128
WIRE -432 2144 -432 2048
WIRE -304 2144 -432 2144
WIRE 240 2144 240 1936
WIRE 240 2144 -224 2144
WIRE -736 2160 -736 2080
WIRE -688 2160 -736 2160
WIRE -608 2160 -608 2080
WIRE -528 2176 -544 2176
WIRE 368 2176 368 2144
WIRE -688 2192 -704 2192
WIRE -736 2208 -736 2160
WIRE 1056 2224 1056 1936
WIRE 1200 2224 1200 2096
WIRE 1200 2224 1136 2224
WIRE -704 2240 -704 2192
WIRE -624 2240 -624 2208
WIRE -624 2240 -704 2240
WIRE -528 2240 -528 2176
WIRE -528 2240 -624 2240
WIRE -464 2240 -464 1952
WIRE 32 2240 32 1952
WIRE 32 2240 -464 2240
WIRE 304 2240 304 2128
WIRE 928 2240 304 2240
WIRE 992 2240 928 2240
WIRE 1264 2256 1136 2256
WIRE 1568 2256 1568 2192
WIRE 1568 2256 1264 2256
WIRE 1680 2256 1680 2192
WIRE 1680 2256 1568 2256
WIRE -608 2272 -608 2192
WIRE -528 2304 -528 2240
WIRE 800 2304 800 2096
WIRE 800 2304 -528 2304
WIRE 1680 2304 1680 2256
WIRE -528 2320 -528 2304
WIRE 1056 2320 1056 2256
WIRE -736 2368 -736 2288
WIRE 928 2368 928 2240
WIRE 992 2368 928 2368
WIRE 1136 2368 1056 2368
WIRE 1264 2368 1264 2256
WIRE 1264 2368 1216 2368
WIRE -528 2400 -528 2384
WIRE 1680 2432 1680 2384
WIRE 928 2448 928 2368
WIRE 1072 2448 928 2448
WIRE 1264 2448 1264 2368
WIRE 1264 2448 1136 2448
FLAG -1216 -64 0
FLAG -976 -240 V_i
IOPIN -976 -240 BiDir
FLAG -400 -96 PWM
IOPIN -400 -96 BiDir
FLAG 1984 -96 0
FLAG 1984 -240 vo
FLAG 1856 -240 V_o
IOPIN 1856 -240 BiDir
FLAG 1168 912 PWM
IOPIN 1168 912 BiDir
FLAG 880 1040 V_f
IOPIN 880 1040 BiDir
FLAG 1312 656 V_f
IOPIN 1312 656 BiDir
FLAG 2000 368 V_o
IOPIN 2000 368 BiDir
FLAG 384 -304 V_i
IOPIN 384 -304 BiDir
FLAG 1424 -64 V_o
IOPIN 1424 -64 BiDir
FLAG -384 400 V_11
IOPIN -384 400 BiDir
FLAG 624 656 0
FLAG 96 640 0
FLAG 960 976 0
FLAG 320 576 V_cuadrada
FLAG 848 592 V_triangular
FLAG -1072 -64 0
FLAG 384 176 0
FLAG 1008 160 0
FLAG 784 160 0
FLAG 1232 160 0
FLAG -352 32 0
FLAG -384 608 V_6
IOPIN -384 608 BiDir
FLAG -384 800 V_3
IOPIN -384 800 BiDir
FLAG -224 928 V_3
IOPIN -224 928 BiDir
FLAG 96 368 V_6
IOPIN 96 368 BiDir
FLAG 624 368 V_6
IOPIN 624 368 BiDir
FLAG 960 368 V_6
IOPIN 960 368 BiDir
FLAG -352 -304 V_11
IOPIN -352 -304 BiDir
FLAG -592 704 0
FLAG -592 896 0
FLAG -720 1088 0
FLAG -1216 368 V_i
IOPIN -1216 368 BiDir
FLAG -1008 960 0
FLAG -1216 960 0
FLAG 1504 368 V_6
IOPIN 1504 368 BiDir
FLAG -928 784 0
FLAG 2000 848 0
FLAG 1504 736 0
FLAG -224 1472 0
FLAG 1824 1584 0
FLAG 112 2000 0
FLAG -304 1984 0
FLAG 368 2176 0
FLAG -80 1472 0
FLAG 848 1680 0
FLAG 1344 1664 0
FLAG 1216 1664 0
FLAG 1456 1664 0
FLAG 720 1840 0
FLAG -608 1824 0
FLAG -608 2048 0
FLAG -736 2368 0
FLAG -1024 1872 0
FLAG -1232 1872 0
FLAG -944 1728 0
FLAG 1680 2432 0
FLAG 1056 2320 0
FLAG 1648 368 V_1_5
IOPIN 1648 368 BiDir
FLAG -608 2272 0
FLAG -528 2400 0
FLAG -592 1072 0
FLAG -384 976 V_1_5
IOPIN -384 976 BiDir
FLAG 1712 608 0
SYMBOL voltage -1216 -208 R0
SYMATTR InstName V_IN
SYMATTR Value {V_IN}
SYMBOL res 1968 -224 R0
SYMATTR InstName R_L
SYMATTR Value {R_L}
SYMBOL TL072 624 528 R0
SYMATTR InstName U2
SYMBOL cap 656 480 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C_PWM
SYMATTR Value {C_PWM}
SYMBOL res 512 560 R90
WINDOW 0 67 59 VBottom 2
WINDOW 3 73 53 VTop 2
SYMATTR InstName R_PWM_5
SYMATTR Value {R_PWM_5}
SYMBOL res 192 784 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R_PWM_4
SYMATTR Value {R_PWM_4}
SYMBOL res 144 688 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R_PWM_3
SYMATTR Value {R_PWM_3}
SYMBOL res 192 560 M180
WINDOW 0 36 76 Left 2
WINDOW 3 28 46 Left 2
SYMATTR InstName R_PWM_6
SYMATTR Value {R_PWM_6}
SYMBOL res 1056 768 R0
SYMATTR InstName R_PULLUP
SYMATTR Value {R_PULLUP}
SYMBOL cap -1088 -176 R0
SYMATTR InstName C_IN
SYMATTR Value {C_IN}
SYMBOL lib\\sym\\nmos 336 -256 R0
WINDOW 0 4 -3 Left 2
WINDOW 3 -49 102 Left 2
SYMATTR InstName M1
SYMATTR Value IRF510
SYMBOL lib\\sym\\nmos 336 32 R0
WINDOW 0 1 -10 Left 2
WINDOW 3 -49 104 Left 2
SYMATTR InstName M2
SYMATTR Value IRF510
SYMBOL res 224 -224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1_BUCK
SYMATTR Value {R1_B}
SYMBOL res 224 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2_BUCK
SYMATTR Value {R2_B}
SYMBOL res 592 -80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L_ESR_BUCK
SYMATTR Value {L_ESR_B}
SYMBOL ind 736 -80 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L_BUCK
SYMATTR Value {L_B}
SYMBOL res 768 -32 R0
WINDOW 0 25 8 Left 2
WINDOW 3 43 52 Left 2
SYMATTR InstName C1_ESR_BUCK
SYMATTR Value {C1_ESR_B}
SYMBOL res 992 -32 R0
WINDOW 0 26 6 Left 2
WINDOW 3 41 53 Left 2
SYMATTR InstName C2_ESR_BUCK
SYMATTR Value {C2_ESR_B}
SYMBOL cap 768 80 R0
SYMATTR InstName C1_BUCK
SYMATTR Value {C1_B}
SYMBOL cap 992 80 R0
SYMATTR InstName C2_BUCK
SYMATTR Value {C2_B}
SYMBOL lib\\sym\\zener 416 -176 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value MBRS340
SYMBOL lib\\sym\\zener 416 112 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value MBRS340
SYMBOL lib\\sym\\LED 1216 80 R0
SYMATTR InstName D3
SYMBOL res 1216 -32 R0
WINDOW 0 21 5 Left 2
WINDOW 3 38 54 Left 2
SYMATTR InstName R_CRIT_BUCK
SYMATTR Value {R_CRIT_B}
SYMBOL lib\\sym\\ir2104 -224 -112 R0
SYMATTR InstName X1
SYMBOL cap -32 -208 R0
WINDOW 0 -62 -83 Left 2
WINDOW 3 -79 -52 Left 2
SYMATTR InstName C_BOOSTRAP_GD
SYMATTR Value {C_BOOSTRAP_GD}
SYMBOL lib\\sym\\OpAmps\\opamp2 96 512 R0
SYMATTR InstName U4
SYMATTR Value LM393
SYMBOL lib\\sym\\OpAmps\\opamp2 960 848 R0
SYMATTR InstName U3
SYMATTR Value LM393
SYMBOL lib\\sym\\zener -224 -256 M90
WINDOW 0 -4 32 VBottom 2
WINDOW 3 36 32 VTop 2
SYMATTR InstName D5
SYMATTR Value MBRS340
SYMBOL res -704 608 M0
SYMATTR InstName R1
SYMATTR Value {R_REF_3}
SYMBOL res -768 464 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R3
SYMATTR Value {R_REF_1}
SYMBOL res -704 464 M0
SYMATTR InstName R4
SYMATTR Value {R_REF_2}
SYMBOL res -704 816 M0
SYMATTR InstName R2
SYMATTR Value 50k
SYMBOL LM358 -624 608 R0
SYMATTR InstName U6
SYMBOL LM358 -624 800 R0
SYMATTR InstName U1
SYMBOL tl431 -1200 784 M0
SYMATTR InstName U5
SYMBOL res -1232 432 R0
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL lib\\sym\\npn -1168 528 R0
SYMATTR InstName Q1
SYMATTR Value BC547C
SYMBOL res -1024 688 R0
SYMATTR InstName R7
SYMATTR Value 5k1
SYMBOL res -1024 832 R0
SYMATTR InstName R8
SYMATTR Value 1k5
SYMBOL cap -1136 704 M0
SYMATTR InstName C1
SYMATTR Value 1n
SYMBOL lib\\sym\\pnp -1072 544 M180
SYMATTR InstName BC557B
SYMBOL cap -944 688 R0
SYMATTR InstName C2
SYMATTR Value 12n
SYMBOL res 1984 704 R0
SYMATTR InstName R6
SYMATTR Value 6.8k
SYMBOL res 1984 544 R0
SYMATTR InstName R9
SYMATTR Value 3.3k
SYMBOL res 1984 416 R0
SYMATTR InstName R10
SYMATTR Value 33k
SYMBOL res 1872 544 R0
SYMATTR InstName R11
SYMATTR Value 150
SYMBOL cap 1872 448 R0
SYMATTR InstName C3
SYMATTR Value 820p
SYMBOL LM358 1536 656 M0
SYMATTR InstName U7
SYMBOL cap 1504 768 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 3.3n
SYMBOL cap 1584 848 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 510p
SYMBOL res 1680 768 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 9k
SYMBOL voltage -224 1328 R0
SYMATTR InstName V_IN1
SYMATTR Value {V_IN}
SYMBOL res 1808 1456 R0
SYMATTR InstName R_L1
SYMATTR Value {R_L}
SYMBOL TL072 112 1872 R0
SYMATTR InstName U8
SYMBOL cap 144 1824 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C_PWM1
SYMATTR Value {C_PWM}
SYMBOL res -16 1904 R90
WINDOW 0 67 59 VBottom 2
WINDOW 3 73 53 VTop 2
SYMATTR InstName R_PWM_1
SYMATTR Value {R_PWM_5}
SYMBOL res -208 2128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R_PWM_2
SYMATTR Value {R_PWM_4}
SYMBOL res -256 2032 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R_PWM_7
SYMATTR Value {R_PWM_3}
SYMBOL res -208 1904 M180
WINDOW 0 36 76 Left 2
WINDOW 3 28 46 Left 2
SYMATTR InstName R_PWM_8
SYMATTR Value {R_PWM_6}
SYMBOL res 432 1968 R0
SYMATTR InstName R_PULLUP1
SYMATTR Value {R_PULLUP}
SYMBOL cap -96 1360 R0
SYMATTR InstName C_IN1
SYMATTR Value {C_IN}
SYMBOL lib\\sym\\nmos 512 1392 R270
WINDOW 0 4 -3 Left 2
WINDOW 3 -49 102 Left 2
SYMATTR InstName M3
SYMATTR Value IRF510
SYMBOL lib\\sym\\nmos 800 1536 R0
WINDOW 0 1 -10 Left 2
WINDOW 3 -95 24 Left 2
SYMATTR InstName M4
SYMATTR Value IRF510
SYMBOL res 576 1584 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R15
SYMATTR Value {R1_B}
SYMBOL res 768 1600 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value {R2_B}
SYMBOL res 1024 1424 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L_ESR_BUCK1
SYMATTR Value {L_ESR_B}
SYMBOL ind 1168 1424 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L_BUCK1
SYMATTR Value {L_B}
SYMBOL res 1200 1472 R0
WINDOW 0 25 8 Left 2
WINDOW 3 -20 -9 VRight 2
SYMATTR InstName C6
SYMATTR Value {C1_ESR_B}
SYMBOL res 1328 1472 R0
WINDOW 0 26 6 Left 2
WINDOW 3 -25 0 VRight 2
SYMATTR InstName C7
SYMATTR Value {C2_ESR_B}
SYMBOL cap 1200 1584 R0
SYMATTR InstName C8
SYMATTR Value {C1_B}
SYMBOL cap 1328 1584 R0
SYMATTR InstName C9
SYMATTR Value {C2_B}
SYMBOL lib\\sym\\zener 592 1312 M270
WINDOW 0 36 32 VTop 2
WINDOW 3 -4 32 VBottom 2
SYMATTR InstName D4
SYMATTR Value MBRS340
SYMBOL lib\\sym\\zener 880 1616 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D6
SYMATTR Value MBRS340
SYMBOL lib\\sym\\LED 1440 1584 R0
SYMATTR InstName D7
SYMBOL res 1440 1472 R0
WINDOW 0 21 5 Left 2
WINDOW 3 -24 -1 VRight 2
SYMATTR InstName R_CRIT_BUCK1
SYMATTR Value {R_CRIT_B}
SYMBOL lib\\sym\\ir2104 576 1760 R270
SYMATTR InstName X2
SYMBOL cap 576 1472 M0
SYMATTR InstName C_BOOSTRAP_GD1
SYMATTR Value {C_BOOSTRAP_GD}
SYMBOL lib\\sym\\OpAmps\\opamp2 -304 1856 R0
SYMATTR InstName U9
SYMATTR Value LM393
SYMBOL lib\\sym\\OpAmps\\opamp2 368 2048 R0
SYMATTR InstName U10
SYMATTR Value LM393
SYMBOL lib\\sym\\zener 448 1568 M90
WINDOW 0 -4 32 VBottom 2
WINDOW 3 36 32 VTop 2
SYMATTR InstName D8
SYMATTR Value MBRS340
SYMBOL res -720 1776 M0
SYMATTR InstName R17
SYMATTR Value {R_REF_3}
SYMBOL res -720 1456 M0
SYMATTR InstName R18
SYMATTR Value {R_REF_1}
SYMBOL res -720 1568 M0
SYMATTR InstName R19
SYMATTR Value {R_REF_2}
SYMBOL res -720 1984 M0
SYMATTR InstName R20
SYMATTR Value 50k
SYMBOL LM358 -640 1728 R0
SYMATTR InstName U11
SYMBOL LM358 -640 1952 R0
SYMATTR InstName U12
SYMBOL tl431 -1216 1696 M0
SYMATTR InstName U13
SYMBOL res -1248 1344 R0
SYMATTR InstName R21
SYMATTR Value 10k
SYMBOL lib\\sym\\npn -1184 1440 R0
SYMATTR InstName Q2
SYMATTR Value BC547C
SYMBOL res -1040 1600 R0
SYMATTR InstName R22
SYMATTR Value 5k1
SYMBOL res -1040 1744 R0
SYMATTR InstName R23
SYMATTR Value 1k5
SYMBOL cap -1152 1616 M0
SYMATTR InstName C10
SYMATTR Value 1n
SYMBOL lib\\sym\\pnp -1088 1456 M180
SYMATTR InstName BC1
SYMBOL cap -960 1632 R0
SYMATTR InstName C11
SYMATTR Value 12n
SYMBOL res 1664 2288 R0
SYMATTR InstName R24
SYMATTR Value 6.8k
SYMBOL res 1664 2096 R0
SYMATTR InstName R25
SYMATTR Value 3.3k
SYMBOL res 1664 1968 R0
SYMATTR InstName R26
SYMATTR Value 33k
SYMBOL res 1552 2096 R0
SYMATTR InstName R27
SYMATTR Value 150
SYMBOL cap 1552 1984 R0
SYMATTR InstName C12
SYMATTR Value 820p
SYMBOL LM358 1088 2240 M0
SYMATTR InstName U14
SYMBOL cap 1056 2352 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C13
SYMATTR Value 3.3n
SYMBOL cap 1136 2432 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C14
SYMATTR Value 510p
SYMBOL res 1232 2352 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R30
SYMATTR Value 9k
SYMBOL res -720 2192 M0
SYMATTR InstName R28
SYMATTR Value 50k
SYMBOL LM358 -640 2176 R0
SYMATTR InstName U15
SYMBOL cap -544 2320 R0
SYMATTR InstName C15
SYMATTR Value 12n
SYMBOL res -704 960 M0
SYMATTR InstName R29
SYMATTR Value 50k
SYMBOL LM358 -624 976 R0
SYMATTR InstName U16
SYMBOL cap 1696 512 R0
SYMATTR InstName C16
SYMATTR Value 12n
TEXT -208 1024 Left 2 ;PWM
TEXT -392 192 Left 2 ;Buck
TEXT -1288 0 Left 2 ;Alimentación
TEXT 1864 -56 Left 2 ;Carga
TEXT 1320 896 Left 2 ;Realimentación
TEXT 3848 144 Left 2 ;Includes
TEXT 3856 208 Left 2 !.lib TL07xTI.txt
TEXT 3856 176 Left 2 !.inc LM393.5_1
TEXT -1288 1104 Left 2 ;Referencia
TEXT -88 832 Left 2 ;Cuadrada
TEXT 392 832 Left 2 ;Triangular
TEXT 2216 -208 Left 2 ;Buck
TEXT 3400 -272 Center 2 ;Parametros
TEXT 3032 -208 Left 2 ;PWM
TEXT 3848 -208 Left 2 ;Realimentación
TEXT 2216 144 Left 2 ;Referencia
TEXT 3032 144 Left 2 ;Entrada
TEXT 3432 144 Left 2 ;Carga
TEXT 3040 176 Left 2 !.param V_IN 12
TEXT 3440 176 Left 2 !.param R_L 22
TEXT 3856 -176 Left 2 !.param V_F 3.15
TEXT 3856 -144 Left 2 !.param F_RL 6.84k
TEXT 3040 -176 Left 2 !.param R_PULLUP 10k
TEXT 3040 208 Left 2 !.param C_IN 1n
TEXT 2224 176 Left 2 !.param R_REF_1 150k
TEXT 3040 -80 Left 2 !.param R_PWM_3 100k
TEXT 3040 -48 Left 2 !.param R_PWM_4 47k
TEXT 3040 -16 Left 2 !.param R_PWM_5 8k2
TEXT 3040 16 Left 2 !.param R_PWM_6 1k5
TEXT 3040 48 Left 2 !.param C_PWM 330p
TEXT 2224 -176 Left 2 !.param R1_B 10
TEXT 2224 -144 Left 2 !.param R2_B R1_B
TEXT 2224 -112 Left 2 !.param L_ESR_B 0.1
TEXT 2224 -80 Left 2 !.param C1_ESR_B 2
TEXT 2224 -48 Left 2 !.param C2_ESR_B 0.01
TEXT 2224 -16 Left 2 !.param R_CRIT_B 1k
TEXT 2224 16 Left 2 !.param L_B 310u
TEXT 2224 48 Left 2 !.param C1_B 2.2u
TEXT 2224 80 Left 2 !.param C2_B 12n
TEXT 2216 592 Left 2 ;Variacion de tension de entrada
TEXT 3400 528 Center 2 ;Funciones
TEXT 2224 624 Left 2 ;.tran 0 125u 25u\n;step param V_IN 12 30 0.5
TEXT 2224 768 Left 2 !.tran 0 500u 0 startup
TEXT 3040 272 Left 2 !.step param V_IN list 12 30
TEXT 2600 -176 Left 2 !.param C_BOOSTRAP_GD 2.2u
TEXT 2224 208 Left 2 !.param R_REF_2 15k
TEXT 2224 240 Left 2 !.param R_REF_3 100k
TEXT 3856 240 Left 2 !.include tl431.lib
TEXT 3856 272 Left 2 !.options gmin=1e-10
TEXT 3856 304 Left 2 !.options abstol=1e-10
TEXT 3856 336 Left 2 !.options reltol=0.003
TEXT 3856 368 Left 2 !.options cshunt=1e-15
TEXT -1280 2504 Left 2 ;Circuto completo
TEXT 3440 272 Left 2 !.step param R_L list 6.33 95
LINE Normal 3008 -192 2208 -192 2
LINE Normal 3824 -192 3024 -192 2
LINE Normal 4640 -192 3840 -192 2
LINE Normal 3008 160 2208 160 2
LINE Normal 4640 160 3840 160 2
LINE Normal 3824 160 3024 160 2
LINE Normal 3424 464 3424 128 2
LINE Normal 3408 608 2208 608 2
LINE Normal 4640 608 3440 608 2
RECTANGLE Normal 1168 1040 -224 368 2
RECTANGLE Normal 1424 208 -400 -304 2
RECTANGLE Normal -976 16 -1296 -288 2
RECTANGLE Normal 2112 -32 1856 -288 2
RECTANGLE Normal 2112 912 1312 368 2
RECTANGLE Normal -384 1120 -1296 368 2
RECTANGLE Normal 272 848 -96 400 2
RECTANGLE Normal 816 848 384 400 2
RECTANGLE Normal 3008 112 2208 -224 2
RECTANGLE Normal 4640 -256 2208 -288 2
RECTANGLE Normal 3824 112 3024 -224 2
RECTANGLE Normal 4640 112 3840 -224 2
RECTANGLE Normal 3008 464 2208 128 2
RECTANGLE Normal 4640 464 3840 128 2
RECTANGLE Normal 3824 464 3024 128 2
RECTANGLE Normal 3408 912 2208 576 2
RECTANGLE Normal 4640 544 2208 512 2
RECTANGLE Normal 4640 912 3440 576 2
RECTANGLE Normal 1952 2528 -1296 1232 2
